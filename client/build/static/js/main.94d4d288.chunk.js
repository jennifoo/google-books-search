(this.webpackJsonpcms=this.webpackJsonpcms||[]).push([[0],{29:function(e,a,t){e.exports=t(59)},34:function(e,a,t){},35:function(e,a,t){},59:function(e,a,t){"use strict";t.r(a);var l=t(0),n=t.n(l),c=t(26),r=t.n(c),s=(t(34),t(11)),o=t(1),i=(t(35),t(9)),m=t(28),u=t(8),E=Object(l.createContext)(),d=E.Provider,v=(e,a)=>{switch(a.type){case"SHOW_RESULTS":return Object(u.a)(Object(u.a)({},e),{},{searchResults:a.searchResults});case"SHOW_SAVED":return Object(u.a)(Object(u.a)({},e),{},{books:[...a.books]});case"DELETE_BOOK":return Object(u.a)(Object(u.a)({},e),{},{books:e.books.filter(e=>e._id!==a._id)});default:return e}},h=e=>{e.value;var a=Object(m.a)(e,["value"]),t=Object(l.useReducer)(v,{books:[],searchResults:[]}),c=Object(i.a)(t,2),r=c[0],s=c[1];return n.a.createElement(d,Object.assign({value:[r,s]},a))},b=()=>Object(l.useContext)(E);var p=function(){return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{id:"view-saved",className:"row"},n.a.createElement("div",{className:"col"},n.a.createElement(s.b,{to:"/",style:{marginRight:"50px"}},"Results"),n.a.createElement(s.b,{to:"/saved"},"View Saved Books"))),n.a.createElement("header",{className:"row"},n.a.createElement("div",{className:"col"},n.a.createElement("h1",null,"Google Books Search"),n.a.createElement("p",null,"Search for and Save Books of Interest"))))},k=t(12),g=t.n(k),f=function(){return g.a.get("/api/books")},N=function(e){return g.a.post("/api/books",e)},w=function({searchTerm:e}){return g.a.get("https://www.googleapis.com/books/v1/volumes?q="+e+"&intitle")},O=function(e){return g.a.delete("api/books/"+e)};var S=function(){var e=Object(l.useRef)(),a=b(),t=Object(i.a)(a,2),c=t[0],r=t[1];return n.a.createElement(n.a.Fragment,null,n.a.createElement("main",{id:"home",className:"container-fluid"},n.a.createElement(p,null),n.a.createElement("div",{id:"search",className:"row"},n.a.createElement("div",{className:"col"},n.a.createElement("form",{onSubmit:a=>{a.preventDefault();var t=e.current.value.split(" ").join("");w({searchTerm:t}).then(e=>{!function(e,a){a(e.data.items.map(({volumeInfo:e},a)=>({title:e.title,authors:[e.authors],description:e.description,image:e.imageLinks.smallThumbnail,link:e.infoLink})))}(e,(function(e){r({type:"SHOW_RESULTS",searchResults:e})}))}).catch(e=>console.log(e))}},n.a.createElement("input",{placeholder:"Search",ref:e}),n.a.createElement("button",{type:"submit"},"Enter")))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col col-results"},n.a.createElement("h2",null,"Results"),c.searchResults.map((e,a)=>n.a.createElement("div",{key:e.title,className:"result-div"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-9"},n.a.createElement("h3",null,e.title),n.a.createElement("p",null,e.authors.map(e=>e))),n.a.createElement("div",{id:"result-button",className:"col-3"},n.a.createElement("a",{className:"button",target:"_blank",href:e.link},"View"),n.a.createElement("button",{onClick:()=>(e=>{var a=c.searchResults[e];console.log("Selected: ",a),N({title:a.title,authors:a.authors,description:a.description,image:a.image,link:a.link}).then(e=>{console.log("Sucessfully saved book.")}).catch(e=>console.log(e))})(a)},"Save"))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-3"},n.a.createElement("img",{src:e.image})),n.a.createElement("div",{className:"col-9"},n.a.createElement("p",null,e.description)))))))))};var j=function(){var e=b(),a=Object(i.a)(e,2),t=a[0],l=a[1];return f().then(e=>{l({type:"SHOW_SAVED",books:e.data})}).catch(e=>console.log(e)),n.a.createElement(n.a.Fragment,null,n.a.createElement("main",{id:"post",className:"container-fluid"},n.a.createElement(p,null),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col col-results"},n.a.createElement("h2",null,"Saved Books"),t.books.map(e=>n.a.createElement("div",{key:e.title,className:"result-div"},n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-9"},n.a.createElement("h3",null,e.title),n.a.createElement("p",null,e.authors.map(e=>e))),n.a.createElement("div",{id:"result-button",className:"col-3"},n.a.createElement("a",{className:"button",target:"_blank",href:e.link},"View"),n.a.createElement("button",{onClick:()=>{return a=e._id,void O(a).then(e=>{l({type:"DELETE_BOOK",_id:a})});var a}},"Delete"))),n.a.createElement("div",{className:"row"},n.a.createElement("div",{className:"col-3"},n.a.createElement("img",{src:e.image})),n.a.createElement("div",{className:"col-9"},n.a.createElement("p",null,e.description)))))))))};var R=function(){return n.a.createElement(s.a,null,n.a.createElement(h,null,n.a.createElement(o.c,null,n.a.createElement(o.a,{exact:!0,path:"/"},n.a.createElement(S,null)),n.a.createElement(o.a,{exact:!0,path:"/saved"},n.a.createElement(j,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(58);r.a.render(n.a.createElement(n.a.StrictMode,null,n.a.createElement(R,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})}},[[29,1,2]]]);
//# sourceMappingURL=main.94d4d288.chunk.js.map